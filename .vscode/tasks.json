{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "üöÄ OANDA Trading Engine (Practice)",
      "type": "shell",
      "command": "bash -lc \"RICK_ENV=practice python3 ${workspaceFolder}/oanda_trading_engine.py\"",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üî¥ OANDA Trading Engine (LIVE)",
      "type": "shell",
      "command": "bash -lc \"RICK_ENV=live python3 ${workspaceFolder}/oanda_trading_engine.py\"",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üí∞ Coinbase Trading Engine (Safe Mode)",
      "type": "shell",
      "command": "bash -lc \"RICK_ENV=practice python3 ${workspaceFolder}/coinbase_safe_mode_engine.py\"",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üî¥ Coinbase Trading Engine (LIVE)",
      "type": "shell",
      "command": "bash -lc \"RICK_ENV=live python3 ${workspaceFolder}/coinbase_safe_mode_engine.py\"",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üì° Persistent Monitor (System Watchdog)",
      "type": "shell",
      "command": "bash -c 'while true; do clear; python3 ${workspaceFolder}/system_watchdog.py 2>&1 || echo \"Watchdog error - retrying in 30s\"; sleep 30; done'",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üìä Live Narration Feed (Auto-refresh)",
      "type": "shell",
      "command": "bash ${workspaceFolder}/scripts/narration_feed.sh narration.jsonl",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": false
      },
      "problemMatcher": []
    },
    {
      "label": "üîç Engine Parameters Diagnostic",
      "type": "shell",
      "command": "bash -c 'echo \"=== OANDA ENGINE PARAMETERS ===\";\necho \"\";\necho \"Current Environment Settings:\";\necho \"  RICK_ENV: ${RICK_ENV:-not set}\";\necho \"  OANDA_ENV (from .env): $(grep RICK_ENV ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2)\";\necho \"\";\necho \"OANDA Configuration:\";\necho \"  Practice Account: $(grep OANDA_PRACTICE_ACCOUNT_ID ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2)\";\necho \"  Practice Token: $(grep OANDA_PRACTICE_TOKEN ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2 | sed \"s/./*/g\")\";\necho \"  Practice URL: $(grep OANDA_PRACTICE_BASE_URL ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2)\";\necho \"\";\necho \"Live Toggle Status:\";\nif [ -f ${workspaceFolder}/.upgrade_toggle ]; then\n  echo \"  Toggle file content: $(cat ${workspaceFolder}/.upgrade_toggle)\";\nelse\n  echo \"  Toggle file: NOT FOUND\";\nfi;\necho \"\";\necho \"Scanning Configuration:\";\necho \"  Instruments: $(grep ^INSTRUMENTS= ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2)\";\necho \"  Micro Trading: $(grep MICRO_TRADING_MODE ${workspaceFolder}/.env 2>/dev/null | cut -d= -f2)\";\necho \"\";\necho \"Process Status:\";\nps aux | grep -E \"oanda_trading_engine|system_watchdog\" | grep -v grep || echo \"  No engine processes running\";\necho \"\";\nread -p \"Press Enter to close...\"'",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    },
    {
      "label": "‚öôÔ∏è Toggle Practice/Live Environment",
      "type": "shell",
      "command": "bash -c 'current=$(cat ${workspaceFolder}/.env | grep ^RICK_ENV= | cut -d= -f2); echo \"Current environment: $current\"; if [ \"$current\" = \"practice\" ]; then new=\"live\"; else new=\"practice\"; fi; echo \"Switch to $new? (y/n)\"; read -r confirm; if [ \"$confirm\" = \"y\" ]; then sed -i \"s/^RICK_ENV=.*/RICK_ENV=$new/\" ${workspaceFolder}/.env; echo \"‚úÖ Switched to $new mode\"; echo \"‚ö†Ô∏è  Please restart the OANDA Trading Engine for changes to take effect\"; else echo \"Cancelled\"; fi; read -p \"Press Enter to close...\"'",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    },
    {
      "label": "üéØ Start Two Persistent Terminals",
      "dependsOn": [
        "üì° Persistent Monitor (System Watchdog)",
        "üìä Live Narration Feed (Auto-refresh)"
      ],
      "problemMatcher": []
    },
    {
      "label": "Tail Narration (Raw JSON)",
      "type": "shell",
      "command": "bash -lc \"tail -n 200 -f ${workspaceFolder}/narration.jsonl\"",
      "isBackground": true,
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    {
      "label": "Check Bot Status",
      "type": "shell",
      "command": "python3 ${workspaceFolder}/check_bot_status_interactive.py",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "üîç Verify Engine Scanning",
      "type": "shell",
      "command": "python3 ${workspaceFolder}/verify_scanning.py && read -p 'Press Enter to close...'",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    },
    {
      "label": "üîç Verify Coinbase System",
      "type": "shell",
      "command": "python3 ${workspaceFolder}/verify_coinbase.py && read -p 'Press Enter to close...'",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "panel": "dedicated",
        "showReuseMessage": false,
        "clear": true
      },
      "problemMatcher": []
    }
  ]
}
